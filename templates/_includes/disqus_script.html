{% if DISQUS_SITENAME %}
  <script type="text/javascript">
    var disqus_shortname = '{{ DISQUS_SITENAME }}';
    {% if article %}
      {% if article.disqus_identifier %}
          var disqus_identifier = '{{ article.disqus_identifier }}';
      {% else %}
          var disqus_identifier = '/{{ article.url }}';
      {% endif %}
    var disqus_url = '{{ SITEURL }}/{{ article.url }}';
    var disqus_title = '{{ article.title|replace("'", "\\'") }}';
    {% endif %}
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = "//" + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
     })();
  </script>
{% endif %}
